# Overlayの仕組みと無効化手順

## 🎯 オーバーレイ（Overlay）とは？
「オーバーレイ」とは、**メインの描画の上に別の情報や映像を重ねて表示する技術**です。

- 例：FPSカウンター、通知、録画インジケーター、VRのUIなど
- GPUはこれらを**レイヤー構造で描画**するため、**処理が多くなると遅延や描画エラーの原因になる**

---

## 🔍 各プラットフォーム別：Overlayの役割と注意点

| プラットフォーム        | 主な役割 | ブラックスクリーンや遅延との関係 | 対処・最適化のヒント |
|-------------------------|----------|-------------------------|--------------------------|
| **NVIDIA**（GeForce Experience） | ShadowPlay（録画/配信）、FPS表示、通知など | OverlayがONのままVR起動 → 映像が止まったり録画が勝手に終了（特にSteamVR起動時） | ⚙ GeForce Experience → オーバーレイ無効<br>Alt+Zでオーバーレイ確認 |
| **Steam** | フレンド通知、チャット、実績通知など | 通常ゲームでは問題ないが、VRやAirLinkなど遅延にシビアな環境では干渉 | Steam設定 → オーバーレイ機能をOFF |
| **SteamVR** | ダッシュボード表示、VRキーボード、Oculus Dashとの統合 | SteamVR自体がVR内オーバーレイ管理者。非対応ゲームでクラッシュやフリーズの原因にもなる | `steamvr.vrsettings` にて `showMirrorView = false` 設定 |
| **Meta Quest Link** | Oculus Dash（デスクトップ表示、通知、ブラウザ等） | AirLink/Link経由で遅延するとHMD内の映像だけブラックアウトする可能性 | 解像度やビットレートを下げる。Dashを開きすぎないようにする |

---

## 📉 Overlayがブラックスクリーンや遅延を招く原因
- Overlayは描画負荷が高く、**タイミングのズレがそのまま描画遅延やフリーズになる**
- 録画オーバーレイ、Oculus Dashなど複数同時起動は要注意

---

## 🛠 オーバーレイ無効化手順

### ✅ NVIDIA GeForce Experience
1. `Alt + Z` を押す（オーバーレイUIを表示）
2. 歯車アイコン（設定）をクリック
3. 「ゲーム内オーバーレイ」をOFFにする

### ✅ Steam ゲーム内オーバーレイ
1. Steam → ライブラリ → 対象ゲームを右クリック
2. 「プロパティ」 → 「一般」→ 「Steamオーバーレイを有効にする」のチェックを外す

### ✅ SteamVR設定
1. `C:\Program Files (x86)\Steam\config\steamvr.vrsettings`
2. 以下のように記述を確認・編集:

```
"steamvr" : {
    "showMirrorView" : false,
    "enableHomeApp" : false
}
```

### ✅ Meta Quest Link
- Metaアプリの「デバイス」設定 → エンコード解像度やビットレートを下げる
- Dash内で複数の仮想モニタやWebブラウザを開かない
- Windowsの仮想デスクトップ使用も控えると効果あり

---

## 💡 補足
Overlayを完全に無効化しなくても、**起動タイミングを制御するバッチファイル（例：timeoutで遅延）**を活用することで、競合やフリーズを防げる。
